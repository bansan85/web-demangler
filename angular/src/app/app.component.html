<dialog #dialog [ngClass]="{ 'open': isOpen }">
  <div>
    <button (click)="closeDialog()">OK</button>
  </div>
  <dl *ngFor="let key of formatStyleKeys">
    <ng-container *ngIf="!isFunction(emptyStyle![key])">
      <dt>{{ key }}:</dt>
    </ng-container>
    <dd>
      <ng-container *ngIf="isNumber(emptyStyle![key])">
        <input type="number" [(ngModel)]="formatStyle![key]" (ngModelChange)="reformat()" />
      </ng-container>
      <ng-container *ngIf="isBoolean(emptyStyle![key])">
        <input type="checkbox" [(ngModel)]="formatStyle![key]" (ngModelChange)="reformat()" />
      </ng-container>
      <ng-container *ngIf="isString(emptyStyle![key])">
        <input [(ngModel)]="formatStyle![key]" (ngModelChange)="reformat()" />
      </ng-container>
      <ng-container *ngIf="isEnum(emptyStyle![key])">
        <select [ngModel]="getEnum(formatStyle![key])" (ngModelChange)="updateEnum($event, key)">
          <option *ngFor="let style of allEnums(emptyStyle![key])" [ngValue]="style">
            {{ style }}
          </option>
        </select>
      </ng-container>
      <ng-container *ngIf="isUndefined(emptyStyle![key])">
        <input type="checkbox" (change)="onUndefinedCheckboxChange($event, inputElement.value, key)" />
        <input #inputElement type="number" [disabled]="formatStyle![key] === undefined"
          (input)="onUndefinedInputChange(inputElement.value, key)" />
      </ng-container>
      <ng-container *ngIf="isStringList(emptyStyle![key])">
        <textarea class="textarea_field" rows="5"
          (input)="onStringList($event, key)">{{ stringListToTextArea(formatStyle![key]) }}</textarea>
      </ng-container>

      <ng-container *ngIf="isMiscStruct(emptyStyle![key])">

        <dl *ngFor="let subkey of formatStyleSubKeys(key)">
          <ng-container *ngIf="!isFunction($any(emptyStyle![key])[subkey])">
            <dt>{{ subkey }}:</dt>
          </ng-container>
          <dd>
            <ng-container *ngIf="isNumber($any(emptyStyle![key])[subkey])">
              <input type="number" [(ngModel)]="$any(formatStyle![key])[subkey]" (ngModelChange)="reformat()" />
            </ng-container>
            <ng-container *ngIf="isBoolean($any(emptyStyle![key])[subkey])">
              <input type="checkbox" [(ngModel)]="$any(formatStyle![key])[subkey]" (ngModelChange)="reformat()" />
            </ng-container>
            <ng-container *ngIf="isString($any(emptyStyle![key])[subkey])">
              <input [(ngModel)]="$any(formatStyle![key])[subkey]" (ngModelChange)="reformat()" />
            </ng-container>
            <ng-container *ngIf="isEnum($any(emptyStyle![key])[subkey])">
              <select [ngModel]="getEnum($any(formatStyle![key])[subkey])"
                (ngModelChange)="updateSubEnum($event, key, subkey)">
                <option *ngFor="let style of allEnums($any(emptyStyle![key])[subkey])" [ngValue]="style">
                  {{ style }}
                </option>
              </select>
            </ng-container>
            <ng-container *ngIf="isUndefined($any(emptyStyle![key])[subkey])">
              <input type="checkbox" (change)="onSubUndefinedCheckboxChange($event, inputElement.value, key, subkey)" />
              <input #inputElement type="number" [disabled]="$any(formatStyle![key])[subkey] === undefined"
                (input)="onSubUndefinedInputChange(inputElement.value, key, subkey)" />
            </ng-container>
            <ng-container *ngIf="isStringList($any(emptyStyle![key])[subkey])">
              <textarea class="textarea_field" rows="5"
                (input)="onSubStringList($event, key, subkey)">{{ stringListToTextArea($any(formatStyle![key])[subkey]) }}</textarea>
            </ng-container>

            <ng-container *ngIf="isMiscStruct($any(emptyStyle![key])[subkey])">

              <dl *ngFor="let subsubkey of formatStyleSubSubKeys(key,subkey)">
                <ng-container *ngIf="!isFunction($any(emptyStyle![key])[subkey][subsubkey])">
                  <dt>{{ subsubkey }}:</dt>
                </ng-container>
                <dd>
                  <ng-container *ngIf="isNumber($any(emptyStyle![key])[subkey][subsubkey])">
                    <input type="number" [(ngModel)]="$any(formatStyle![key])[subkey][subsubkey]"
                      (ngModelChange)="reformat()" />
                  </ng-container>
                  <ng-container *ngIf="isBoolean($any(emptyStyle![key])[subkey][subsubkey])">
                    <input type="checkbox" [(ngModel)]="$any(formatStyle![key])[subkey][subsubkey]"
                      (ngModelChange)="reformat()" />
                  </ng-container>
                  <ng-container *ngIf="isString($any(emptyStyle![key])[subkey][subsubkey])">
                    <input [(ngModel)]="$any(formatStyle![key])[subkey][subsubkey]" (ngModelChange)="reformat()" />
                  </ng-container>
                  <ng-container *ngIf="isEnum($any(emptyStyle![key])[subkey][subsubkey])">
                    <select [ngModel]="getEnum($any(formatStyle![key])[subkey][subsubkey])"
                      (ngModelChange)="updateSubSubEnum($event, key, subkey, subsubkey)">
                      <option *ngFor="let style of allEnums($any(emptyStyle![key])[subkey][subsubkey])"
                        [ngValue]="style">
                        {{ style }}
                      </option>
                    </select>
                  </ng-container>
                  <ng-container *ngIf="isUndefined($any(emptyStyle![key])[subkey][subsubkey])">
                    <input type="checkbox"
                      (change)="onSubSubUndefinedCheckboxChange($event, inputElement.value, key, subkey, subsubkey)" />
                    <input #inputElement type="number"
                      [disabled]="$any(formatStyle![key])[subkey][subsubkey] === undefined"
                      (input)="onSubSubUndefinedInputChange(inputElement.value, key, subkey, subsubkey)" />
                  </ng-container>
                  <ng-container *ngIf="isStringList($any(emptyStyle![key])[subkey][subsubkey])">
                    <textarea class="textarea_field" rows="5"
                      (input)="onSubSubStringList($event, key, subkey, subsubkey)">{{ stringListToTextArea($any(formatStyle![key])[subkey][subsubkey]) }}</textarea>
                  </ng-container>

                  <ng-container *ngIf="isMiscStruct($any(emptyStyle![key])[subkey][subsubkey])">



                  </ng-container>

                  <ng-container
                    *ngIf="!isNumber($any(emptyStyle![key])[subkey][subsubkey]) && !isBoolean($any(emptyStyle![key])[subkey][subsubkey]) && !isString($any(emptyStyle![key])[subkey][subsubkey]) && !isEnum($any(emptyStyle![key])[subkey][subsubkey]) && !isUndefined($any(emptyStyle![key])[subkey][subsubkey]) && !isStringList($any(emptyStyle![key])[subkey][subsubkey]) && !isFunction($any(emptyStyle![key])[subkey][subsubkey]) && !isMiscStruct($any(emptyStyle![key])[subkey][subsubkey])">
                    <span>{{ typeOf($any(formatStyle![key])[subkey][subsubkey]) }}TODO</span>
                  </ng-container>
                </dd>
              </dl>

            </ng-container>
            <ng-container
              *ngIf="!isNumber($any(emptyStyle![key])[subkey]) && !isBoolean($any(emptyStyle![key])[subkey]) && !isString($any(emptyStyle![key])[subkey]) && !isEnum($any(emptyStyle![key])[subkey]) && !isUndefined($any(emptyStyle![key])[subkey]) && !isStringList($any(emptyStyle![key])[subkey]) && !isFunction($any(emptyStyle![key])[subkey]) && !isMiscStruct($any(emptyStyle![key])[subkey])">
              <span>{{ typeOf($any(formatStyle![key])[subkey]) }}TODO</span>
            </ng-container>
          </dd>
        </dl>

      </ng-container>
      <ng-container
        *ngIf="!isNumber(emptyStyle![key]) && !isBoolean(emptyStyle![key]) && !isString(emptyStyle![key]) && !isEnum(emptyStyle![key]) && !isUndefined(emptyStyle![key]) && !isStringList(emptyStyle![key]) && !isFunction(emptyStyle![key]) && !isMiscStruct(emptyStyle![key])">
        <span>{{ typeOf(formatStyle![key]) }}TODO</span>
      </ng-container>
    </dd>
  </dl>
</dialog>

<div class="textareas">
  <div class="textarea">
    <h2>Mangled symbol (C++, D, Rust, MSVC, Itanium)</h2>
    <textarea #mangledInput wrap="off" placeholder="Enter mangled names (one per line)"
      (input)="onDemangle(mangledInput.value)"></textarea>
  </div>
  <div class="textarea">
    <h2>Demangled symbol<lucide-icon [class.disabled]="!formatStyle" name="settings"
        (click)="openDialog()"></lucide-icon>
    </h2>
    <textarea wrap="off" [value]="demangledName.join('\n')" readonly></textarea>
  </div>
</div>