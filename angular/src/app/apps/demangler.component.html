<app-dialog-ext #dialog>
  <div dialog-header>
    <span>clang-format's options</span>
  </div>
  <div dialog-body>
    <input type="checkbox" name="enableClangFormat" [ngModel]="enableClangFormat"
      (ngModelChange)="onEnableClangFormat($event)"> Format with clang-format<br />
    <ng-container *ngIf="enableClangFormat && formatter">
      <dl>
        <dt>Load style from:</dt>
        <dd>
          <dl>
            <dt>Preset:</dt>
            <dd>
              <select #newStyle>
                <option value="llvm">LLVM</option>
                <option value="google">Google</option>
                <option value="chromium">Chromium</option>
                <option value="mozilla">Mozilla</option>
                <option value="webKit">WebKit</option>
                <option value="gnu">GNU</option>
                <option value="microsoft">Microsoft</option>
                <option value="clangFormat">ClangFormat</option>
                <option value="none">None</option>
              </select>
              <button (click)="loadStyle()">Load</button>
            </dd>
          </dl>
        </dd>
        <dd>
          <dl>
            <dt>File:</dt>
            <dd>
              <button (click)="fileInput.click()">Browse</button>
              <input type="file" #fileInput style="display: none" (change)="loadYamlFromFile($event)">
            </dd>
          </dl>
        </dd>
        <dd>
          <dl>
            <dt>Text:</dt>
            <textarea #textClangConfig rows="5"></textarea>
            <dd>
              <button (click)="loadYamlFromText()">Load</button>
            </dd>
          </dl>
        </dd>
      </dl>
      <dl>
        <dt>Save style to:</dt>
        <dd>
          <dl>
            <dt>File</dt>
            <dd>
              <button (click)="downloadYaml()">Save</button>
            </dd>
          </dl>
        </dd>
        <dd>
          <dl>
            <dt>Clipboard</dt>
            <dd>
              <button (click)="saveYamlToText()">Copy</button>
            </dd>
          </dl>
        </dd>
      </dl>
      <details [attr.open]='enableClangFormatExpert ? true : null' (toggle)="onEnableClangFormatExpert($event)">
        <summary>All parameters</summary>
        <app-formatter-options [formatStyle]="formatStyle!" [formatter]="formatter!" [emptyStyle]="emptyStyle!"
          (changeOptions)="reformat()">
        </app-formatter-options>
      </details>
    </ng-container>
  </div>
</app-dialog-ext>

<div class="textareas">
  <div class="textarea">
    <h2>Mangled symbol (C++, D, Rust, MSVC, Itanium)</h2>
    <textarea #mangledInput wrap="off" placeholder="Enter mangled names (one per line)"
      (input)="onDemangle(mangledInput.value)"></textarea>
  </div>
  <div class="textarea">
    <h2>Demangled symbol<lucide-icon name="settings" (click)="dialog.openDialog()"></lucide-icon>
    </h2>
    <textarea wrap="off" [value]="demangledName.join('\n')" readonly></textarea>
  </div>
</div>

<ng-container *ngIf="isLoading()">
  <lucide-icon name="loader-circle" class="loader" [size]="loadingSize"></lucide-icon>
</ng-container>

<a href="https://github.com/bansan85/web-demangler">
  <app-github-mark-inline class="github_logo"></app-github-mark-inline>
</a>